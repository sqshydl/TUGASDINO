<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>Dinosaurus Chrome</title>
    <style>
        body {
            margin: 0;
            overflow: hidden;
        }
        canvas {
            width: 100%;
            height: 100%;
        }
    </style>
</head>
<body>
    <canvas id="gameCanvas"></canvas>
    <script src="https://cdn.jsdelivr.net/npm/gl-matrix@2.8.1/dist/gl-matrix-min.js"></script>
    <script>
        let canvas, gl, program, positionBuffer, texCoordBuffer, textures = [];

        function init() {
            canvas = document.getElementById("gameCanvas");
            gl = canvas.getContext("webgl");

            // Kompilasi shader
            const vertexShader = compileShader(gl.VERTEX_SHADER, `
                attribute vec2 a_position;
                attribute vec2 a_texCoord;
                uniform mat4 u_matrix;
                varying vec2 v_texCoord;

                void main() {
                    gl_Position = u_matrix * vec4(a_position, 0.0, 1.0);
                    v_texCoord = a_texCoord;
                }
            `);

            const fragmentShader = compileShader(gl.FRAGMENT_SHADER, `
                precision mediump float;
                varying vec2 v_texCoord;
                uniform sampler2D u_texture;

                void main() {
                    gl_FragColor = texture2D(u_texture, v_texCoord);
                }
            `);

            program = gl.createProgram();
            gl.attachShader(program, vertexShader);
            gl.attachShader(program, fragmentShader);
            gl.linkProgram(program);

            // Membuat buffer untuk posisi dan koordinat tekstur
            positionBuffer = gl.createBuffer();
            texCoordBuffer = gl.createBuffer();

            // Mengambil lokasi atribut dan uniform dari program
            const positionLocation = gl.getAttribLocation(program, "a_position");
            const texCoordLocation = gl.getAttribLocation(program, "a_texCoord");
            const matrixLocation = gl.getUniformLocation(program, "u_matrix");
            const textureLocation = gl.getUniformLocation(program, "u_texture");

            // Membuat dan mengisi tekstur
            const image = new Image();
            image.src = "X:\Games"; // Ganti dengan path ke gambar dino Anda
            image.onload = () => {
                const texture = gl.createTexture();
                gl.bindTexture(gl.TEXTURE_2D, texture);
                gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, gl.RGBA, gl.UNSIGNED_BYTE, image);
                gl.generateMipmap(gl.TEXTURE_2D);
                textures.push(texture);
                render();
            };

            // Fungsi render game
            function render() {
                gl.clearColor(0.0, 0.0, 0.0, 1.0);
                gl.clear(gl.COLOR_BUFFER_BIT);

                gl.useProgram(program);

                // Mengikat buffer dan mengatur atribut
                gl.bindBuffer(gl.ARRAY_BUFFER, positionBuffer);
                gl.enableVertexAttribArray(positionLocation);
                gl.vertexAttribPointer(positionLocation, 2, gl.FLOAT, false, 0, 0);

                gl.bindBuffer(gl.ARRAY_BUFFER, texCoordBuffer);
                gl.enableVertexAttribArray(texCoordLocation);
                gl.vertexAttribPointer(texCoordLocation, 2, gl.FLOAT, false, 0, 0);

                // Mengatur uniform untuk matriks dan tekstur
                const matrix = mat4.create();
                gl.uniformMatrix4fv(matrixLocation, false, matrix);
                gl.activeTexture(gl.TEXTURE0);
                gl.bindTexture(gl.TEXTURE_2D, textures[0]);
                gl.uniform1i(textureLocation, 0);

                // Menggambar objek
                gl.drawArrays(gl.TRIANGLES, 0, 6);

                requestAnimationFrame(render);
            }

            // Fungsi kompilasi shader
            function compileShader(type, source) {
                const shader = gl.createShader(type);
                gl.shaderSource(shader, source);
                gl.compileShader(shader);
                if (!gl.getShaderParameter(shader, gl.COMPILE_STATUS)) {
                    console.error('Kompilasi shader gagal:', gl.getShaderInfoLog(shader));
                    gl.deleteShader(shader);
                    return null;
                }
                return shader;
            }
        }

        window.onload = init;
    </script>
</body>
</html>